<!doctype html>
<html class="no-js">

	<head>
		<meta charset="UTF-8">

		<title>点豆成兵</title>

		<!--IE Compatibility modes-->
		<meta http-equiv="X-UA-Compatible" content="IE=edge">

		<!--Mobile first-->

		<!-- Bootstrap -->
		<link rel="stylesheet" href="../../css/webcss/bootstrap.min.css">

		<!-- Font Awesome -->
		<link rel="stylesheet" href="../../css/webcss/font-awesome.min.css">

		<!-- Metis core stylesheet -->
		<link rel="stylesheet" href="../../css/webcss/main.css">

		<!-- metisMenu stylesheet -->
		<link rel="stylesheet" href="../../css/webcss/metisMenu.min.css">

		<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->

		<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->

		<!--[if lt IE 9]>
      <script src="../../js/webjs/html5shiv.js"></script>
      <script src="../../js/webjs/respond.min.js"></script>
      <![endif]-->

		<link rel="stylesheet" href="../../css/webcss/theme.css">
		<link rel="stylesheet" href="../../css/webcss/jasny-bootstrap.min.css">
		<script src="../../js/webjs/less.min.js"></script>

		<!--Modernizr-->
		<script src="../../js/webjs/modernizr.min.js"></script>
		<script src="../../js/webjs/base.js"></script>
	</head>

	<body>
		<div class="bg-dark dk" id="wrap">
			<div id="top" class="bg-dark dk" style="width:100%;height:60px;position:fixed;top:0;left:0;z-index: 999999;">
				<header class="head">
					<div class="search-bar" style="text-align: center;">
						<img style="height:40px;width:103px;" src="../../img/webimg/logo_big.png">
					</div>
					<div class="main-bar" style="">
						<h3><i class="fa fa-book"></i>&nbsp; 课程列表</h3>
					</div>
				</header>
			</div>

			<div id="left" class="bg-dark dker" style="width:250px;height:100%;position:fixed;top:60px;left:0;z-index: 999999;">
				<div class="media user-media bg-dark dker">
					<div class="user-media-toggleHover">
						<span class="fa fa-user"></span>
					</div>
					<div class="user-wrapper bg-dark">
						<a class="user-link" href="">
							<img class="media-object img-thumbnail user-img" style="width:64px;height:64px;" alt="User Picture" src="../../img/webimg/qrcode.jpg">
						</a>
						<div class="media-body">
							<h5 class="media-heading">欢迎登录点豆成兵</h5>
							<ul class="list-unstyled user-info">
								<li>Administrator</li>
								<li>最近一次访问 :
									<br>
									<small>
                    <i class="fa fa-calendar"></i>&nbsp;2015-12-31</small>
								</li>
							</ul>
						</div>
					</div>
				</div>

				<!-- #menu -->
				<ul id="menu" class="bg-blue dker">
					<li class="">
						<a href="admin_index.html">
							<i class="fa fa-upload"></i><span class="link-title">&nbsp;添加课程</span>
						</a>
					</li>
					<li class="">
						<a href="class_list.html">
							<i class="fa fa-book"></i><span class="link-title">&nbsp;课程列表</span>
						</a>
					</li>
					<li class="">
						<a href="open_class_banner.html">
							<i class="fa fa-align-justify"></i><span class="link-title">&nbsp;公开课Banner</span>
						</a>
					</li>
					<li class="">
						<a href="live_class_share.html">
							<i class="fa fa-share-alt"></i><span class="link-title">&nbsp;直播课程分享链接</span>
						</a>
					</li>
					<li class="">
						<a href="live_class_apply.html">
							<i class="fa fa-github-alt"></i><span class="link-title">&nbsp;直播课程报名人数统计</span>
						</a>
					</li>
					<li class="">
						<a href="user_question_list.html">
							<i class="fa fa-question-circle"></i><span class="link-title">&nbsp;直播课程提问</span>
						</a>
					</li>
					<li class="">
						<a href="live_class_apply.html">
							<i class="fa fa-github-alt"></i><span class="link-title">&nbsp;直播课程报名人数统计</span>
						</a>
					</li>
					<li class="">
						<a href="open_class_study_count.html">
							<i class="fa fa fa-beer"></i><span class="link-title">&nbsp;公开课学习人数统计</span>
						</a>
					</li>
					<li class="nav-divider"></li>
					<li class="">
						<a href="user_forward_audit.html">
							<i class="fa fa-legal"></i><span class="link-title">&nbsp;视频广告</span>
						</a>
					</li>
					<li class="nav-divider"></li>
					<li class="">
						<a href="weixin_user_list.html">
							<i class="fa fa-user"></i><span class="link-title">&nbsp;微信用户列表</span>
						</a>
					</li>
					<li class="nav-divider"></li>
					<li class="">
						<a href="live_class_statistic.html">
							<i class="fa fa-align-left"></i><span class="link-title">&nbsp;直播课程统计信息</span>
						</a>
					</li>
					<li class="nav-divider"></li>
					<li>
						<a href="/web/webUserLogout">
							<i class="fa fa-sign-out"></i>
							<span class="link-title">退出</span>
						</a>
					</li>
				</ul>
				<!-- /#menu -->
			</div>
			<!-- /#left -->
			<div id="content" style="margin-left:250px;margin-top:60px;">
				<div class="outer">
					<div class="inner bg-light lter" style="overflow-y: auto;">
						<div class="row">
			              <div class="col-lg-12">
			                <div class="box">
			                  <header>
			                    <div class="icons">
			                      <i class="fa fa-align-left"></i>
			                    </div>
			                    <h5>直播课程统计信息</h5>
			                  </header>
			                  <div id="collapse4" class="body">
			                    <table id="dataTable" style="white-space:normal;" class="table table-bordered table-condensed table-hover table-striped">
			                      <thead>
			                        <tr>
			                          <th nowrap="nowrap">课程名称</th>
			                          <th nowrap="nowrap">课程导师</th>
			                          <th nowrap="nowrap">直播时间</th>
			                        </tr>
			                      </thead>
			                      <tbody id="data_detail">
			                        
			                      </tbody>
			                    </table>
			                  </div>
			                </div>
			              </div>
			            </div><!-- /.row -->
					</div>
					<!-- /.inner -->
				</div>
				<!-- /.outer -->
			</div>
			<!-- /#content -->
		</div>
		
		<div id="chartModal" class="modal fade">
			<div class="modal-dialog">
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
						<h4 class="modal-title">详细数据统计</h4>
					</div>
					<div class="modal-body" id="tips_info">
						正在加载数据......
					</div>
					<div class="modal-body" id="chart_data" style='display:none;width:600px;height:450px;'>
						
					</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
					</div>
				</div>
				<!-- /.modal-content -->
			</div>
			<!-- /.modal-dialog -->
		</div>
		
		<!-- /#wrap -->
		<footer class="Footer bg-dark dker" style="width:100%;height:48px;position:fixed;bottom:0;left:0;z-index: 999999;">
			<p>沪ICP备15002235号-4 | COPYRIGHT &copy; 2014-2015, BANGRONGNETWORKTECH, ALL RIGHTS RESERVED</p>

		</footer>
		<!-- /#footer -->

		<!--jQuery -->
		<script src="../../js/webjs/jquery.min.js"></script>
		<script src="../../js/webjs/highcharts.js"></script>

		<!--Bootstrap -->
		<script src="../../js/webjs/bootstrap.min.js"></script>

		<!-- MetisMenu -->
		<script src="../../js/webjs/metisMenu.min.js"></script>

		<!-- Screenfull -->
		<script src="../../js/webjs/screenfull.min.js"></script>

		<script src="../../js/webjs/jasny-bootstrap.min.js"></script>

		<!-- Metis core scripts -->
		<script src="../../js/webjs/core.min.js"></script>

		<!-- Metis demo scripts -->
		<script src="../../js/webjs/app.js"></script>
		<script>
			var chart = new Highcharts.Chart({ 
	            chart: { 
	                renderTo: 'chart_data', 
	                defaultSeriesType: 'line', //图表类别，可取值有：line、spline、area、areaspline、bar、column等 
	                marginRight: 130, 
	                marginBottom: 25 
	            },
	            xAxis: { 
	                categories: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 
	            'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec']//设置x轴的标题 
	            }, 
	            yAxis: { 
	                title: { 
	                    text: '在线人数' //设置y轴的标题 
	                }, 
	                plotLines: [{ 
	                    value: 0, 
	                    width: 1, 
	                    color: '#808080' 
	                }] 
	            }, 
	            tooltip: { 
	                formatter: function () { 
	                    return '<b>' + this.series.name + '</b><br/>' + 
	               this.x + ': ' + this.y + 'Â°C';  //鼠标放在数据点的显示信息，但是当设置显示了每个节点的数据项的值时就不会再有这个显示信息 
	                } 
	            }, 
	            legend: { 
	                layout: 'vertical', 
	                align: 'right', //设置说明文字的文字 left/right/top/ 
	                verticalAlign: 'top', 
	                x: -10, 
	                y: 100, 
	                borderWidth: 0 
	            }, 
	            exporting: { 
	                enabled: false  
	            }, 
	            plotOptions: { 
	                line: { 
	                    dataLabels: { 
	                        enabled: true //显示每条曲线每个节点的数据项的值 
	                    }, 
	                    enableMouseTracking: false 
	                } 
	            }, 
	            series: [{ 
	                name: 'Tokyo', //每条线的名称 
	                data: [7.0, 6.9, 9.5, 14.5, 18.2, 21.5, 25.2, 26.5, 23.3, 18.3, 13.9, 9.6]//每条线的数据 
	            }, { 
	                name: 'New York', 
	                data: [-0.2, 0.8, 5.7, 11.3, 17.0, 22.0, 24.8, 24.1, 20.1, 14.1, 8.6, 2.5] 
	            }, { 
	                name: 'Berlin', 
	                data: [-0.9, 0.6, 3.5, 8.4, 13.5, 17.0, 18.6, 17.9, 14.3, 9.0, 3.9, 1.0] 
	            }, { 
	                name: 'London', 
	                data: [3.9, 4.2, 5.7, 8.5, 11.9, 15.2, 17.0, 16.6, 14.2, 10.3, 6.6, 4.8] 
	            }] 
	        });
			var userHasCancelChartData = false;
			$('#chartModal').on('hide.bs.modal', function () {
				userHasCancelChartData = true;
				$('#chart_data').hide();$('#tips_info').show();
			})
			function clickCourse(courseId) {
				$('#chartModal').modal("show");
				userHasCancelChartData = false;
				chart.setTitle('测试标题','2不2',false);
				$('#chart_data').show();$('#tips_info').hide();
			}
			$('.outer').height($('#left').height() - 48 - 61 - 19);
			$('.inner').height($('#left').height() - 48 - 61 - 20 - 20);
			$(window).resize(function() {
				$('.outer').height($('#left').height() - 48 - 61 - 19);
				$('.inner').height($('#left').height() - 48 - 61 - 20 - 20);
			});
			function checkJsonIsEmpty(json) {
				var isEmpty = true;
				if (json == null) return true;
				for (var jsonKey in json) {
					isEmpty = false;
					break;
				}
				return isEmpty;
			}
			function createDataList(data) {
				var detailNode = document.getElementById('data_detail');
				for (var i in data) {
					var thNode = document.createElement('tr');
					thNode.innerHTML = "<td nowrap='nowrap'><a href='javascript:clickCourse(\""+data[i].id+"\")'>"+data[i].name+"</a></td><td nowrap='nowrap'>"+data[i].teacher+"</td><td nowrap='nowrap'>"+data[i].course_date_readable+"</td>";
					detailNode.appendChild(thNode);
				}
			}
			$.ajax({
				url: '/weixin/getAllLiveClass',
				type: "POST",
				data: {},
				success: function(data) {
					if (!checkJsonIsEmpty(data)) {
						createDataList(data);
					}
				},
				error: function(status, error) {
				}
			});
		</script>
	</body>